import{r as T,a as C,b as $,c as A,d as w,o as c,e as u,f as s,g as m,h as _,i as F,F as f,j as M,k as z,w as p,n as x,t as I,l as W}from"./vendor.dc6cf644.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const b of r.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&i(b)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};N();var h=(e,t)=>{for(const[o,i]of t)e[o]=i;return e};const S={components:{ChevronLeftIcon:T,ChevronRightIcon:C,RefreshIcon:$,XIcon:A},data(){return{}},props:{tabs:Array,current_tab:Number},emits:["reload","stop","goForward","goBackward"],methods:{reload(e){this.$emit("reload",e)},stop(e){this.$emit("stop",e)},goForward(e){this.$emit("goForward",e)},goBackward(e){this.$emit("goBackward",e)},copyText(){var e=document.getElementById("searchBar");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}},mounted(){}},R={id:"navigation_bar",class:"relative"},E=["disabled"],V=["disabled"],H=["value"],G={class:"ml-auto flex items-center justify-center absolute right-2.2 top-2.1"},O={key:0,class:"animate-spin w-4.5 h-4.5 text-white ml-auto flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),K=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),X=[j,K];function Z(e,t,o,i,n,r){var g,v,k,y,L;const b=w("ChevronLeftIcon"),a=w("ChevronRightIcon"),l=w("XIcon"),B=w("RefreshIcon");return c(),u("div",R,[s("button",{disabled:(g=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:g.cant_go_back,onClick:t[0]||(t[0]=d=>r.goBackward(o.current_tab))},[m(b,{class:"w-4 h-4"})],8,E),s("button",{disabled:(v=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:v.cant_go_forward,onClick:t[1]||(t[1]=d=>r.goForward(o.current_tab))},[m(a,{class:"w-4 h-4"})],8,V),((k=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:k.is_loading)?(c(),u("button",{key:0,onClick:t[2]||(t[2]=d=>r.stop(o.current_tab))},[m(l,{class:"w-4 h-4"})])):(c(),u("button",{key:1,onClick:t[3]||(t[3]=d=>r.reload(o.current_tab))},[m(B,{class:"w-4 h-4"})])),s("input",{onClick:t[4]||(t[4]=(...d)=>r.copyText&&r.copyText(...d)),value:(y=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:y.url,type:"text",readonly:""},null,8,H),s("div",G,[((L=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:L.is_loading)?(c(),u("svg",O,X)):_("",!0)])])}var q=h(S,[["render",Z]]),D="/assets/icon.838fc2a6.png";const P=F({name:"AppBar",components:{Header:q},props:{is_dashboard:Boolean,current_tab:Number,tabs:Array},emits:["selectTab","closeTab","newTab","reload","stop","goForward","goBackward"],methods:{reload(e){this.$emit("reload",e)},stop(e){this.$emit("stop",e)},goForward(e){this.$emit("goForward",e)},goBackward(e){this.$emit("goBackward",e)},selectTab(e){this.$emit("selectTab",e)},closeTab(e){this.$emit("closeTab",e)},newTab(){this.$emit("newTab")},closeWindow(){window.current.close("web-app")},minimizeWindow(){window.current.minimize("web-app")},maximizeWindow(){window.current.maximize("web-app")}}}),U={id:"appbar",class:"w-full flex select-none relative items-start border-b border-orange-400 h-8"},Y={class:"w-full flex items-center relative -top-[1px]"},J=s("div",{class:""},[s("button",{class:"p-1.5 draggable"},[s("img",{src:D,class:"h-5 flex-shrink-0",alt:"App Logo"})])],-1),Q=["onClick"],ee=s("svg",{class:"animate-spin w-3 h-3 text-white ml-auto flex-shrink-0 block group-hover:hidden",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),te=["onClick"],oe=s("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),ne=[oe],se=["onClick"],re=s("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),ae=[re],ie=s("span",null,"+",-1),le=[ie],de={class:"ml-auto flex items-center gap-2"},ce=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-dash-lg w-5 h-5 fill-current",viewBox:"0 0 16 16"},[s("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"})],-1),ue=[ce],be=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-square w-3 h-3 fill-current",viewBox:"0 0 16 16"},[s("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})],-1),we=[be],me=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-x w-6 h-6 fill-current",viewBox:"0 0 16 16"},[s("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),he=[me];function _e(e,t,o,i,n,r){const b=w("Header");return c(),u(f,null,[s("div",U,[s("div",Y,[J,(c(!0),u(f,null,M(e.tabs,a=>(c(),u("button",{key:a.id,onClick:p(l=>e.selectTab(a.id),["self"]),class:x([{"selected ":a.id==e.current_tab},"tab max-w-32 lg:max-w-38 xl:max-w-48 flex items-center group"])},[s("div",{class:x([{"text-true-gray-200":a.id==e.current_tab,"text-true-gray-300":a.id!=e.current_tab},"overflow-ellipsis overflow-hidden max-w-28 lg:max-w-34 xl:max-w-44 whitespace-nowrap pointer-events-none"])},I(a.title),3),a.is_loading?(c(),u(f,{key:0},[ee,s("button",{onClick:p(l=>e.closeTab(a.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},ne,8,te)],64)):(c(),u("button",{key:1,onClick:p(l=>e.closeTab(a.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},ae,8,se))],10,Q))),128)),e.tabs.length<5?(c(),u("button",{key:0,onClick:t[0]||(t[0]=a=>e.newTab()),class:"hover:bg-dark-600 duration-200 transition-colors text-orange-400 ml-1 px-1 relative bottom-[1px]"},le)):_("",!0)]),s("div",de,[s("button",{class:"controls",onClick:t[1]||(t[1]=(...a)=>e.minimizeWindow&&e.minimizeWindow(...a))},ue),s("button",{class:"controls",onClick:t[2]||(t[2]=(...a)=>e.maximizeWindow&&e.maximizeWindow(...a))},we),s("button",{class:"controls",id:"closeBtn",onClick:t[3]||(t[3]=(...a)=>e.closeWindow&&e.closeWindow(...a))},he)])]),e.is_dashboard?_("",!0):(c(),z(b,{key:0,onReload:t[4]||(t[4]=a=>e.reload(a)),onStop:t[5]||(t[5]=a=>e.stop(a)),onGoForward:t[6]||(t[6]=a=>e.goForward(a)),onGoBackward:t[7]||(t[7]=a=>e.goBackward(a)),current_tab:e.current_tab,tabs:e.tabs},null,8,["current_tab","tabs"]))],64)}var fe=h(P,[["render",_e]]);const pe={},ge={id:"webview_container",class:"relative"};function ve(e,t,o,i,n,r){return c(),u("div",ge)}var ke=h(pe,[["render",ve]]);const ye={components:{AppBar:fe,WebView:ke},data(){return{is_dashboard:!1,is_loading:!1,tabs:[],current_tab:0}},methods:{pageController(e,t){const o=this.tabs.find(i=>i.id===e);o.url=t},goBackward(e){this.tabs.find(o=>o.id===e).webview.goBack()},goForward(e){this.tabs.find(o=>o.id===e).webview.goForward()},reload(e){this.tabs.find(o=>o.id===e).webview.reload()},stop(e){this.tabs.find(o=>o.id===e).webview.stop()},selectTab(e){this.current_tab=e;for(let o=0;o<this.tabs.length;o++){const i=this.tabs[o];i.webview.style=""}const t=this.tabs.find(o=>o.id===e);t.webview.style="z-index: 100;",console.log(`Selected tab id: ${e}`)},closeTab(e){if(this.current_tab!=e)this.selectTab(this.current_tab);else if(this.tabs.length>1){const o=this.tabs.map(i=>i.id).indexOf(e);o==0?this.selectTab(this.tabs[o+1].id):this.selectTab(this.tabs[o-1].id)}this.tabs.find(o=>o.id===e).webview.remove(),this.tabs=[...this.tabs].filter(function(o){return o.id!==e}),console.log(`Removed tab id: ${e}`)},newTab(){this.createNewTab()},async createNewTab(e=!0){var t=this,o=Math.floor(Math.random()*1001);await this.createWebview(o).then(async function(){const i=document.getElementById(o);t.tabs.push({id:o,webview:i,title:"SimpleMMO",url:"https://web.simple-mmo.com/",cant_go_back:!0,cant_go_forward:!0,is_loading:!0}),t.setUpListeners(i,o).then(async function(n){console.log("Finished preparing new tab."),e&&t.selectTab(o)})})},async createWebview(e=0){var t=`<webview id="${e}" partition="${window.auth.getSession()}"  useragent="Mozilla/5.0 (Linux; Android 9.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Mobile Safari/537.36 | Simulated web version by Y0mu" src="https://web.simple-mmo.com/"></webview>`;document.getElementById("webview_container").insertAdjacentHTML("afterbegin",t)},async setUpListeners(e,t){const o=this.tabs.find(n=>n.id===t);var i=this;e.addEventListener("dom-ready",()=>{e.addEventListener("ipc-message",n=>{n.channel=="friendlist"}),e.addEventListener("did-start-loading",function(n){o.title=e.getTitle(),o.is_loading=!0,o.cant_go_back=e.canGoBack()!==!0,o.cant_go_forward=e.canGoForward()!==!0},!1),e.addEventListener("will-navigate",function(n){i.url=n.url,i.pageController(t,n.url)},!1),e.addEventListener("did-stop-loading",function(n){o.title=e.getTitle(),o.is_loading=!1,o.cant_go_back=e.canGoBack()!==!0,o.cant_go_forward=e.canGoForward()!==!0},!1)})}},created(){document.addEventListener("auxclick",function(e){e.preventDefault()},!1)},mounted(){this.createNewTab()}},Le={class:"w-sreen h-screen overflow-hidden"};function xe(e,t,o,i,n,r){const b=w("AppBar"),a=w("WebView");return c(),u("div",Le,[m(b,{onSelectTab:t[0]||(t[0]=l=>r.selectTab(l)),onCloseTab:t[1]||(t[1]=l=>r.closeTab(l)),onNewTab:t[2]||(t[2]=l=>r.newTab()),onReload:t[3]||(t[3]=l=>r.reload(l)),onStop:t[4]||(t[4]=l=>r.stop(l)),onGoForward:t[5]||(t[5]=l=>r.goForward(l)),onGoBackward:t[6]||(t[6]=l=>r.goBackward(l)),is_dashboard:n.is_dashboard,current_tab:n.current_tab,tabs:n.tabs},null,8,["is_dashboard","current_tab","tabs"]),m(a,{current_tab:n.current_tab,tabs:n.tabs},null,8,["current_tab","tabs"])])}var Be=h(ye,[["render",xe]]);const Te=W(Be);Te.mount("#app");
