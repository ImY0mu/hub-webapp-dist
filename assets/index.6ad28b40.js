import{r as T,a as $,b as A,c as F,d as u,o as d,e as b,f as a,g as w,h as x,i as M,j as z,k as I,w as L,l as h,n as B,t as W,F as C,m as S,p as N}from"./vendor.7fc6ba8a.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};E();var m=(e,t)=>{for(const[o,i]of t)e[o]=i;return e};const R={components:{ChevronLeftIcon:T,ChevronRightIcon:$,RefreshIcon:A,XIcon:F},data(){return{}},props:{tabs:Array,current_tab:Number},emits:["reload","stop","goForward","goBackward"],methods:{reload(e){this.$emit("reload",e)},stop(e){this.$emit("stop",e)},goForward(e){this.$emit("goForward",e)},goBackward(e){this.$emit("goBackward",e)},copyText(){var e=document.getElementById("searchBar");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}},mounted(){}},V={id:"navigation_bar",class:"relative"},H=["disabled"],G=["disabled"],O=["value"],j={class:"ml-auto flex items-center justify-center absolute right-2.2 top-2.1"},K={key:0,class:"animate-spin w-4.5 h-4.5 text-white ml-auto flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},X=a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Z=a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),q=[X,Z];function D(e,t,o,i,s,r){var _,p,v,k,y;const c=u("ChevronLeftIcon"),f=u("ChevronRightIcon"),n=u("XIcon"),g=u("RefreshIcon");return d(),b("div",V,[a("button",{disabled:(_=o.tabs.find(l=>l.id===o.current_tab))==null?void 0:_.cant_go_back,onClick:t[0]||(t[0]=l=>r.goBackward(o.current_tab))},[w(c,{class:"w-4 h-4"})],8,H),a("button",{disabled:(p=o.tabs.find(l=>l.id===o.current_tab))==null?void 0:p.cant_go_forward,onClick:t[1]||(t[1]=l=>r.goForward(o.current_tab))},[w(f,{class:"w-4 h-4"})],8,G),((v=o.tabs.find(l=>l.id===o.current_tab))==null?void 0:v.is_loading)?(d(),b("button",{key:0,onClick:t[2]||(t[2]=l=>r.stop(o.current_tab))},[w(n,{class:"w-4 h-4"})])):(d(),b("button",{key:1,onClick:t[3]||(t[3]=l=>r.reload(o.current_tab))},[w(g,{class:"w-4 h-4"})])),a("input",{onClick:t[4]||(t[4]=(...l)=>r.copyText&&r.copyText(...l)),value:(k=o.tabs.find(l=>l.id===o.current_tab))==null?void 0:k.url,type:"text",readonly:""},null,8,O),a("div",j,[((y=o.tabs.find(l=>l.id===o.current_tab))==null?void 0:y.is_loading)?(d(),b("svg",K,q)):x("",!0)])])}var P=m(R,[["render",D]]),U="/assets/icon.838fc2a6.png";const Y=M({name:"AppBar",components:{Header:P,draggable:z},data(){return{dragging:!1,enabled:!0}},props:{is_dashboard:Boolean,current_tab:Number,tabs:Array},emits:["selectTab","closeTab","newTab","reload","stop","goForward","goBackward"],methods:{reload(e){this.$emit("reload",e)},stop(e){this.$emit("stop",e)},goForward(e){this.$emit("goForward",e)},goBackward(e){this.$emit("goBackward",e)},selectTab(e){this.$emit("selectTab",e)},closeTab(e){this.$emit("closeTab",e)},newTab(){this.$emit("newTab")},closeWindow(){window.current.close("web-app")},minimizeWindow(){window.current.minimize("web-app")},maximizeWindow(){window.current.maximize("web-app")}}}),J={id:"appbar",class:"w-full flex select-none relative items-start border-b border-orange-400 h-8"},Q={class:"w-full flex items-center relative -top-[1px]"},ee=a("div",{class:"flex-shrink-0"},[a("button",{class:"p-1.5 draggable"},[a("img",{src:U,class:"h-5 flex-shrink-0",alt:"App Logo"})])],-1),te={class:"w-full flex items-center relative"},oe=["onClick"],ne=a("svg",{class:"animate-spin w-3 h-3 text-white ml-auto flex-shrink-0 block group-hover:hidden",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),se=["onClick"],ae=a("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),re=[ae],ie=["onClick"],le=a("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),de=[le],ce=a("span",null,"+",-1),be=[ce],ue={class:"ml-auto flex items-center gap-2"},we=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-dash-lg w-5 h-5 fill-current",viewBox:"0 0 16 16"},[a("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"})],-1),fe=[we],ge=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-square w-3 h-3 fill-current",viewBox:"0 0 16 16"},[a("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})],-1),me=[ge],he=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-x w-6 h-6 fill-current",viewBox:"0 0 16 16"},[a("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),_e=[he];function pe(e,t,o,i,s,r){const c=u("draggable"),f=u("Header");return d(),b(C,null,[a("div",J,[a("div",Q,[ee,a("div",te,[w(c,{list:e.tabs,disabled:!e.enabled,"item-key":"id",class:"w-full flex items-center relative",onStart:t[1]||(t[1]=n=>e.dragging=!0),onEnd:t[2]||(t[2]=n=>e.dragging=!1)},I({item:L(({element:n})=>[a("button",{onClick:h(g=>e.selectTab(n.id),["self"]),class:B([{"selected ":n.id==e.current_tab},"tab max-w-32 lg:max-w-38 xl:max-w-48 flex items-center group"])},[a("div",{class:B([{"text-true-gray-200":n.id==e.current_tab,"text-true-gray-300":n.id!=e.current_tab},"overflow-ellipsis overflow-hidden max-w-28 lg:max-w-34 xl:max-w-44 whitespace-nowrap pointer-events-none"])},W(n.title),3),n.is_loading?(d(),b(C,{key:0},[ne,a("button",{onClick:h(g=>e.closeTab(n.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},re,8,se)],64)):(d(),b("button",{key:1,onClick:h(g=>e.closeTab(n.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},de,8,ie))],10,oe)]),_:2},[e.tabs.length<5?{name:"footer",fn:L(()=>[a("button",{onClick:t[0]||(t[0]=n=>e.newTab()),class:"hover:bg-dark-600 duration-200 transition-colors text-orange-400 ml-1 px-1 relative bottom-[1px]"},be)])}:void 0]),1032,["list","disabled"])])]),a("div",ue,[a("button",{class:"controls",onClick:t[3]||(t[3]=(...n)=>e.minimizeWindow&&e.minimizeWindow(...n))},fe),a("button",{class:"controls",onClick:t[4]||(t[4]=(...n)=>e.maximizeWindow&&e.maximizeWindow(...n))},me),a("button",{class:"controls",id:"closeBtn",onClick:t[5]||(t[5]=(...n)=>e.closeWindow&&e.closeWindow(...n))},_e)])]),e.is_dashboard?x("",!0):(d(),S(f,{key:0,onReload:t[6]||(t[6]=n=>e.reload(n)),onStop:t[7]||(t[7]=n=>e.stop(n)),onGoForward:t[8]||(t[8]=n=>e.goForward(n)),onGoBackward:t[9]||(t[9]=n=>e.goBackward(n)),current_tab:e.current_tab,tabs:e.tabs},null,8,["current_tab","tabs"]))],64)}var ve=m(Y,[["render",pe]]);const ke={},ye={id:"webview_container",class:"relative"};function xe(e,t,o,i,s,r){return d(),b("div",ye)}var Le=m(ke,[["render",xe]]);const Be={components:{AppBar:ve,WebView:Le},data(){return{is_dashboard:!1,is_loading:!1,tabs:[],current_tab:0}},methods:{pageController(e,t){const o=this.tabs.find(i=>i.id===e);o.url=t},goBackward(e){this.tabs.find(o=>o.id===e).webview.goBack()},goForward(e){this.tabs.find(o=>o.id===e).webview.goForward()},reload(e){this.tabs.find(o=>o.id===e).webview.reload()},stop(e){this.tabs.find(o=>o.id===e).webview.stop()},selectTab(e){this.current_tab=e;for(let o=0;o<this.tabs.length;o++){const i=this.tabs[o];i.webview.style="display: none;"}const t=this.tabs.find(o=>o.id===e);t.webview.style="z-index: 100;",console.log(`Selected tab id: ${e}`)},closeTab(e){if(this.current_tab!=e)this.selectTab(this.current_tab);else if(this.tabs.length>1){const o=this.tabs.map(i=>i.id).indexOf(e);o==0?this.selectTab(this.tabs[o+1].id):this.selectTab(this.tabs[o-1].id)}this.tabs.find(o=>o.id===e).webview.remove(),this.tabs=[...this.tabs].filter(function(o){return o.id!==e}),console.log(`Removed tab id: ${e}`)},newTab(){this.createNewTab()},async createNewTab(e=!0){var t=this,o=Math.floor(Math.random()*1001);await this.createWebview(o).then(async function(){const i=document.getElementById(o);t.tabs.push({id:o,webview:i,title:"SimpleMMO",url:"https://web.simple-mmo.com/",cant_go_back:!0,cant_go_forward:!0,is_loading:!0}),t.setUpListeners(i,o).then(async function(s){console.log("Finished preparing new tab."),e&&t.selectTab(o)})})},async createWebview(e=0){var t=`<webview id="${e}" partition="${window.auth.getSession()}"  useragent="Mozilla/5.0 (Linux; Android 9.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Mobile Safari/537.36 | Simulated web version by Y0mu" src="https://web.simple-mmo.com/"></webview>`;document.getElementById("webview_container").insertAdjacentHTML("afterbegin",t)},async setUpListeners(e,t){const o=this.tabs.find(s=>s.id===t);var i=this;e.addEventListener("dom-ready",()=>{e.addEventListener("ipc-message",s=>{s.channel=="friendlist"}),e.addEventListener("did-start-loading",function(s){o.title=e.getTitle(),o.is_loading=!0,o.cant_go_back=e.canGoBack()!==!0,o.cant_go_forward=e.canGoForward()!==!0},!1),e.addEventListener("will-navigate",function(s){i.url=s.url,i.pageController(t,s.url)},!1),e.addEventListener("did-stop-loading",function(s){o.title=e.getTitle(),o.is_loading=!1,o.cant_go_back=e.canGoBack()!==!0,o.cant_go_forward=e.canGoForward()!==!0},!1)})}},created(){document.addEventListener("auxclick",function(e){e.preventDefault()},!1)},mounted(){this.createNewTab()}},Ce={class:"w-sreen h-screen overflow-hidden"};function Te(e,t,o,i,s,r){const c=u("AppBar"),f=u("WebView");return d(),b("div",Ce,[w(c,{onSelectTab:t[0]||(t[0]=n=>r.selectTab(n)),onCloseTab:t[1]||(t[1]=n=>r.closeTab(n)),onNewTab:t[2]||(t[2]=n=>r.newTab()),onReload:t[3]||(t[3]=n=>r.reload(n)),onStop:t[4]||(t[4]=n=>r.stop(n)),onGoForward:t[5]||(t[5]=n=>r.goForward(n)),onGoBackward:t[6]||(t[6]=n=>r.goBackward(n)),is_dashboard:s.is_dashboard,current_tab:s.current_tab,tabs:s.tabs},null,8,["is_dashboard","current_tab","tabs"]),w(f,{current_tab:s.current_tab,tabs:s.tabs},null,8,["current_tab","tabs"])])}var $e=m(Be,[["render",Te]]);const Ae=N($e);Ae.mount("#app");
