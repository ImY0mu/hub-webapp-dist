import{o as openBlock,c as createElementBlock,a as createBaseVNode,F as Fragment,r as renderList,w as withModifiers,t as toDisplayString,b as render,d as render$1,e as render$2,f as render$3,g as resolveComponent,h as resolveDirective,i as createVNode,j as createCommentVNode,k as withDirectives,l as defineComponent,m as draggable,n as normalizeClass,p as createSlots,q as withCtx,s as createBlock,u as createTextVNode,v as createStaticVNode,x as semver,y as createApp,z as plugin}from"./vendor.580f48e6.js";const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};p();var Bookmarks_vue_vue_type_style_index_0_lang="",_export_sfc=(t,e)=>{for(const[o,i]of e)t[o]=i;return t};const _sfc_main$7={props:{tabs:Array,current_tab:Number,is_correct_account:Boolean,bookmarks:Array},emits:["bookmark","removeBookmark","clickAway","visitPage"],methods:{bookmark(t){this.$emit("bookmark",t)},removeBookmark(t,e){this.$emit("removeBookmark",[t,e])},visitPage(t,e=!1){console.log("visitPage,"[e]),this.$emit("visitPage",[t,e])},fixListener(){var t=this;this.tabs.find(o=>o.id===this.current_tab).webview.addEventListener("ipc-message",o=>{o.channel=="clickAway"&&t.$emit("clickAway")})}},mounted(){console.log(this.bookmarks),this.fixListener()}},_hoisted_1$7={class:"pb-1 max-h-[calc(100vh-10rem)] overflow-y-auto"},_hoisted_2$5={class:"flex items-center"},_hoisted_3$5=["onClick","onContextmenu"],_hoisted_4$4=["onClick"],_hoisted_5$4=createBaseVNode("svg",{class:"w-4 h-4",viewBox:"0 0 24 24"},[createBaseVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),_hoisted_6$4=[_hoisted_5$4],_hoisted_7$4={key:1,class:"text-true-gray-500 text-xs px-2"},_hoisted_8$4={class:"pt-1 border-t border-true-gray-800"},_hoisted_9$3={key:0,disabled:""};function _sfc_render$7(t,e,o,i,s,r){var c;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$7,[o.bookmarks.length>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(o.bookmarks,d=>(openBlock(),createElementBlock("div",_hoisted_2$5,[createBaseVNode("button",{onClick:a=>r.visitPage(d.url),onContextmenu:withModifiers(a=>r.visitPage(d.url,!0),["right"])},toDisplayString(d.title),41,_hoisted_3$5),createBaseVNode("button",{onClick:a=>r.removeBookmark(d.title,d.url),class:"custom !w-auto ml-auto !p-0.5 mr-0.5 hover:!text-red-600"},_hoisted_6$4,8,_hoisted_4$4)]))),256)):(openBlock(),createElementBlock("span",_hoisted_7$4,"No bookmarks yet"))]),createBaseVNode("div",_hoisted_8$4,[((c=o.tabs.find(d=>d.id===o.current_tab))==null?void 0:c.is_bookmarked)?(openBlock(),createElementBlock("button",_hoisted_9$3,"Already bookmarked")):(openBlock(),createElementBlock("button",{key:1,class:"!text-true-gray-400",onClick:e[0]||(e[0]=d=>r.bookmark(o.current_tab))},"Bookmark current page"))])],64)}var Bookmarks=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]),Header_vue_vue_type_style_index_0_lang="";const _sfc_main$6={components:{ChevronLeftIcon:render,ChevronRightIcon:render$1,RefreshIcon:render$2,XIcon:render$3,Bookmarks},data(){return{show:!1}},props:{tabs:Array,current_tab:Number,is_correct_account:Boolean,bookmarks:Array},emits:["reload","stop","goForward","bookmark","removeBookmark","goBackward","visitPage"],methods:{visitPage(t,e=!1){this.show=!1,this.$emit("visitPage",[t,e])},onClickAway(t){this.show=!1},popupController(){this.show=!this.show},reload(t){this.$emit("reload",t)},stop(t){this.$emit("stop",t)},bookmark(t){this.$emit("bookmark",t)},removeBookmark(t,e){this.$emit("removeBookmark",[t,e])},goForward(t){this.$emit("goForward",t)},goBackward(t){this.$emit("goBackward",t)},copyText(){var t=document.getElementById("searchBar");t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}},mounted(){}},_hoisted_1$6={id:"navigation_bar",class:"relative flex items-center z-101"},_hoisted_2$4=["disabled"],_hoisted_3$4=["disabled"],_hoisted_4$3=["value"],_hoisted_5$3={class:"ml-auto flex items-center justify-center absolute right-[2.6rem]"},_hoisted_6$3={key:0,class:"animate-spin w-4.5 h-4.5 text-white ml-auto flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_hoisted_7$3=createBaseVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),_hoisted_8$3=createBaseVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),_hoisted_9$2=[_hoisted_7$3,_hoisted_8$3],_hoisted_10$2={key:0,class:"w-4 h-4",viewBox:"0 0 24 24"},_hoisted_11$2=createBaseVNode("path",{fill:"currentColor",d:"M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z"},null,-1),_hoisted_12$2=[_hoisted_11$2],_hoisted_13$2={key:1,class:"w-4 h-4",viewBox:"0 0 24 24"},_hoisted_14$2=createBaseVNode("path",{fill:"currentColor",d:"M17,18L12,15.82L7,18V5H17M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z"},null,-1),_hoisted_15$2=[_hoisted_14$2],_hoisted_16$2={key:2,id:"dropdopwn",class:"absolute top-[2rem] bg-dark-900 py-1 right-0.5 z-50 rounded border-1 border-true-gray-600"};function _sfc_render$6(t,e,o,i,s,r){var h,b,m,k,f,g;const c=resolveComponent("ChevronLeftIcon"),d=resolveComponent("ChevronRightIcon"),a=resolveComponent("XIcon"),u=resolveComponent("RefreshIcon"),_=resolveComponent("Bookmarks"),l=resolveDirective("click-away");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("button",{disabled:(h=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:h.cant_go_back,onClick:e[0]||(e[0]=n=>r.goBackward(o.current_tab))},[createVNode(c,{class:"w-4 h-4"})],8,_hoisted_2$4),createBaseVNode("button",{disabled:(b=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:b.cant_go_forward,onClick:e[1]||(e[1]=n=>r.goForward(o.current_tab))},[createVNode(d,{class:"w-4 h-4"})],8,_hoisted_3$4),((m=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:m.is_loading)?(openBlock(),createElementBlock("button",{key:0,onClick:e[2]||(e[2]=n=>r.stop(o.current_tab))},[createVNode(a,{class:"w-4 h-4"})])):(openBlock(),createElementBlock("button",{key:1,onClick:e[3]||(e[3]=n=>r.reload(o.current_tab))},[createVNode(u,{class:"w-4 h-4"})])),createBaseVNode("input",{id:"searchBar",onClick:e[4]||(e[4]=(...n)=>r.copyText&&r.copyText(...n)),value:(k=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:k.url,type:"text",readonly:""},null,8,_hoisted_4$3),createBaseVNode("div",_hoisted_5$3,[((f=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:f.is_loading)?(openBlock(),createElementBlock("svg",_hoisted_6$3,_hoisted_9$2)):createCommentVNode("",!0)]),createBaseVNode("button",{class:"ml-2",onClick:e[5]||(e[5]=(...n)=>r.popupController&&r.popupController(...n))},[((g=o.tabs.find(n=>n.id===o.current_tab))==null?void 0:g.is_bookmarked)?(openBlock(),createElementBlock("svg",_hoisted_10$2,_hoisted_12$2)):(openBlock(),createElementBlock("svg",_hoisted_13$2,_hoisted_15$2))]),s.show?withDirectives((openBlock(),createElementBlock("div",_hoisted_16$2,[createVNode(_,{onReload:e[6]||(e[6]=n=>r.reload(n)),onBookmark:e[7]||(e[7]=n=>r.bookmark(n)),onRemoveBookmark:e[8]||(e[8]=n=>r.removeBookmark(n[0],n[1])),onClickAway:r.onClickAway,onVisitPage:e[9]||(e[9]=n=>r.visitPage(n[0],n[1])),current_tab:o.current_tab,bookmarks:o.bookmarks,tabs:o.tabs},null,8,["onClickAway","current_tab","bookmarks","tabs"])],512)),[[l,r.onClickAway]]):createCommentVNode("",!0)])}var Header=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),_imports_0="/assets/icon.838fc2a6.png",AppBar_vue_vue_type_style_index_0_lang="";const _sfc_main$5=defineComponent({name:"AppBar",components:{Header,draggable},data(){return{dragging:!1,enabled:!0}},props:{is_dashboard:Boolean,is_correct_account:Boolean,current_tab:Number,tabs:Array,updateRequired:Boolean,bookmarks:Array},emits:["selectTab","closeTab","newTab","visitPage","reload","stop","bookmark","goForward","goBackward","openDashboard","removeBookmark"],methods:{visitPage(t,e=!1){this.$emit("visitPage",[t,e])},openDashboard(){this.$emit("openDashboard")},reload(t){this.$emit("reload",t)},stop(t){this.$emit("stop",t)},bookmark(t){this.$emit("bookmark",t)},removeBookmark(t,e){console.log("got here"),this.$emit("removeBookmark",[t,e])},goForward(t){this.$emit("goForward",t)},goBackward(t){this.$emit("goBackward",t)},selectTab(t){this.$emit("selectTab",t)},closeTab(t){this.$emit("closeTab",t)},newTab(){this.$emit("newTab")},closeWindow(){window.current.close("web-app")},minimizeWindow(){window.current.minimize("web-app")},maximizeWindow(){window.current.maximize("web-app")}}}),_hoisted_1$5={id:"appbar",class:"w-full flex select-none relative items-start border-b border-orange-400 h-8"},_hoisted_2$3={class:"w-full flex items-center relative -top-[1px]"},_hoisted_3$3={class:"flex-shrink-0"},_hoisted_4$2=createBaseVNode("img",{src:_imports_0,class:"h-5 flex-shrink-0",alt:"App Logo"},null,-1),_hoisted_5$2=[_hoisted_4$2],_hoisted_6$2={key:0,class:"w-full flex items-center relative"},_hoisted_7$2=["onClick"],_hoisted_8$2=createBaseVNode("svg",{class:"animate-spin w-3 h-3 text-white ml-auto flex-shrink-0 block group-hover:hidden",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[createBaseVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),createBaseVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_hoisted_9$1=["onClick"],_hoisted_10$1=createBaseVNode("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[createBaseVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),_hoisted_11$1=[_hoisted_10$1],_hoisted_12$1=["onClick"],_hoisted_13$1=createBaseVNode("svg",{class:"w-3.5 h-3.5 pointer-events-none",viewBox:"0 0 24 24"},[createBaseVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1),_hoisted_14$1=[_hoisted_13$1],_hoisted_15$1=createBaseVNode("span",null,"+",-1),_hoisted_16$1=[_hoisted_15$1],_hoisted_17$1={class:"ml-auto flex items-center gap-2"},_hoisted_18=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-dash-lg w-5 h-5 fill-current",viewBox:"0 0 16 16"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"})],-1),_hoisted_19=[_hoisted_18],_hoisted_20=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-square w-3 h-3 fill-current",viewBox:"0 0 16 16"},[createBaseVNode("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})],-1),_hoisted_21=[_hoisted_20],_hoisted_22=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-x w-6 h-6 fill-current",viewBox:"0 0 16 16"},[createBaseVNode("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),_hoisted_23=[_hoisted_22];function _sfc_render$5(t,e,o,i,s,r){const c=resolveComponent("draggable"),d=resolveComponent("Header");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("button",{class:normalizeClass({"selected ":t.current_tab==null}),onClick:e[0]||(e[0]=(...a)=>t.openDashboard&&t.openDashboard(...a)),id:"dashboardBtn"},_hoisted_5$2,2)]),!t.updateRequired&&t.is_correct_account?(openBlock(),createElementBlock("div",_hoisted_6$2,[createVNode(c,{list:t.tabs,disabled:!t.enabled,"item-key":"id",class:"w-full flex items-center relative",onStart:e[2]||(e[2]=a=>t.dragging=!0),onEnd:e[3]||(e[3]=a=>t.dragging=!1)},createSlots({item:withCtx(({element:a})=>[createBaseVNode("button",{onClick:withModifiers(u=>t.selectTab(a.id),["self"]),class:normalizeClass([{"selected ":a.id==t.current_tab},"tab max-w-32 lg:max-w-38 xl:max-w-48 flex items-center group"])},[createBaseVNode("div",{class:normalizeClass([{"text-true-gray-200":a.id==t.current_tab,"text-true-gray-300":a.id!=t.current_tab},"overflow-ellipsis overflow-hidden max-w-28 lg:max-w-34 xl:max-w-44 whitespace-nowrap pointer-events-none"])},toDisplayString(a.title),3),a.is_loading?(openBlock(),createElementBlock(Fragment,{key:0},[_hoisted_8$2,createBaseVNode("button",{onClick:withModifiers(u=>t.closeTab(a.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},_hoisted_11$1,8,_hoisted_9$1)],64)):(openBlock(),createElementBlock("button",{key:1,onClick:withModifiers(u=>t.closeTab(a.id),["self"]),class:"ml-auto text-red-300 hover:text-red-500 hidden group-hover:block"},_hoisted_14$1,8,_hoisted_12$1))],10,_hoisted_7$2)]),_:2},[t.tabs.length<5?{name:"footer",fn:withCtx(()=>[createBaseVNode("button",{onClick:e[1]||(e[1]=a=>t.newTab()),class:"hover:bg-dark-600 duration-200 transition-colors text-orange-400 ml-1 px-1 relative bottom-[1px]"},_hoisted_16$1)])}:void 0]),1032,["list","disabled"])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_17$1,[createBaseVNode("button",{class:"controls",onClick:e[4]||(e[4]=(...a)=>t.minimizeWindow&&t.minimizeWindow(...a))},_hoisted_19),createBaseVNode("button",{class:"controls",onClick:e[5]||(e[5]=(...a)=>t.maximizeWindow&&t.maximizeWindow(...a))},_hoisted_21),createBaseVNode("button",{class:"controls",id:"closeBtn",onClick:e[6]||(e[6]=(...a)=>t.closeWindow&&t.closeWindow(...a))},_hoisted_23)])]),t.tabs.length!=0&&!t.is_dashboard&&t.is_correct_account?(openBlock(),createBlock(d,{key:0,onReload:e[7]||(e[7]=a=>t.reload(a)),onStop:e[8]||(e[8]=a=>t.stop(a)),onBookmark:e[9]||(e[9]=a=>t.bookmark(a)),onGoForward:e[10]||(e[10]=a=>t.goForward(a)),onRemoveBookmark:e[11]||(e[11]=a=>t.removeBookmark(a[0],a[1])),onGoBackward:e[12]||(e[12]=a=>t.goBackward(a)),onVisitPage:e[13]||(e[13]=a=>t.visitPage(a[0],a[1])),current_tab:t.current_tab,bookmarks:t.bookmarks,tabs:t.tabs},null,8,["current_tab","bookmarks","tabs"])):createCommentVNode("",!0)],64)}var AppBar=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]),WebView_vue_vue_type_style_index_0_lang="";const _sfc_main$4={},_hoisted_1$4={id:"webview_container",class:"relative"};function _sfc_render$4(t,e,o,i,s,r){return openBlock(),createElementBlock("div",_hoisted_1$4)}var WebView=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),Dashboard_vue_vue_type_style_index_0_lang="";const _sfc_main$3={props:{player:Object,keybinds:Array}},_hoisted_1$3={id:"dashboard_container",class:"relative"},_hoisted_2$2={id:"dashboard"},_hoisted_3$2={class:"p-4 flex flex-col h-full lg:max-w-screen-lg xl:max-w-screen-xl mx-auto"},_hoisted_4$1=createBaseVNode("h1",{class:"text-xl text-true-gray-100"},"Dashboard",-1),_hoisted_5$1={class:"text-lg text-true-gray-200 text-center mt-12"},_hoisted_6$1=createTextVNode(" Hello "),_hoisted_7$1={class:"text-green-400"},_hoisted_8$1=createTextVNode(", I hope you are having a good time playing "),_hoisted_9=createBaseVNode("span",{class:"text-orange-400"},"SimpleMMO",-1),_hoisted_10=createTextVNode(". "),_hoisted_11={class:"grid -grid-cols-2 gap-6 w-full mt-12 max-w-prose mx-auto"},_hoisted_12={class:"w-full text-true-gray-300"},_hoisted_13=createBaseVNode("h2",{class:"text-true-gray-200 text-left"},"Keybinds",-1),_hoisted_14={class:"bg-true-gray-900 p-2 rounded space-y-1 min-h-34"},_hoisted_15={class:""},_hoisted_16={class:"ml-auto"},_hoisted_17=createStaticVNode('<div class="w-full text-true-gray-300 hidden"><h2 class="text-true-gray-200 text-left">Features</h2><div class="bg-true-gray-900 p-2 rounded space-y-1 text-left min-h-34"><div class="text-sm">Browser like behaviour</div><div class="text-sm">QoL improvements</div></div></div>',1);function _sfc_render$3(t,e,o,i,s,r){var c;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[_hoisted_4$1,createBaseVNode("h1",_hoisted_5$1,[_hoisted_6$1,createBaseVNode("span",_hoisted_7$1,toDisplayString((c=o.player)==null?void 0:c.name),1),_hoisted_8$1,_hoisted_9,_hoisted_10]),createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[_hoisted_13,createBaseVNode("div",_hoisted_14,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.keybinds,d=>(openBlock(),createElementBlock("div",{key:d.id,class:"flex items-center text-sm"},[createBaseVNode("div",_hoisted_15,toDisplayString(d==null?void 0:d.name),1),createBaseVNode("div",_hoisted_16,toDisplayString(d==null?void 0:d.keyName),1)]))),128))])]),_hoisted_17])])])])}var Dashboard=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]);const _sfc_main$2={},_hoisted_1$2={class:"w-full h-full dark:text-true-gray-300 text-true-gray-300 font-medium text-lg flex items-center justify-center"},_hoisted_2$1=createBaseVNode("div",{class:"mb-16"},"Update of App Hub is required",-1),_hoisted_3$1=[_hoisted_2$1];function _sfc_render$2(t,e,o,i,s,r){return openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_3$1)}var UpdateHub=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]);const _sfc_main$1={emits:["new_session"],data(){return{is_loading:!1}},methods:{async createWebview(t=0,e){var o=`<webview id="${t}" allowpopups partition="${window.auth.getSession()}" preload="${window.background.getPreload("web")}preload.js"  useragent="Mozilla/5.0 (Linux; Android 9.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Mobile Safari/537.36 | Simulated web version by Y0mu" src="https://web.simple-mmo.com"></webview>`;document.getElementById("webview_container").insertAdjacentHTML("afterbegin",o),this.setUpListeners()},async setUpListeners(t,e){var o=this;setTimeout(()=>{document.querySelector("webview").addEventListener("ipc-message",i=>{if(i.channel=="logout")return o.handleNewSession()})},10)},handleNewSession(){this.$emit("new_session")},logout(){this.is_loading=!0,document.querySelector("webview").src="https://web.simple-mmo.com/logout"}},mounted(){this.createWebview()}},_hoisted_1$1={class:"w-full h-full dark:text-true-gray-300 text-true-gray-300 font-medium text-lg flex flex-col items-center justify-center"},_hoisted_2=createBaseVNode("div",{class:"mb-16"},"Sign into the same account you are currently using at App Hub",-1),_hoisted_3={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_hoisted_4=createBaseVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),_hoisted_5=createBaseVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),_hoisted_6=[_hoisted_4,_hoisted_5],_hoisted_7=createTextVNode(" Logout "),_hoisted_8=createBaseVNode("div",{id:"webview_container",class:"hidden"},null,-1);function _sfc_render$1(t,e,o,i,s,r){return openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2,createBaseVNode("button",{onClick:e[0]||(e[0]=c=>r.logout()),class:"border border-orange-400 hover:bg-true-gray-900 px-3 py-2 text-sm rounded-md transition-colors"},[s.is_loading?(openBlock(),createElementBlock("svg",_hoisted_3,_hoisted_6)):(openBlock(),createElementBlock(Fragment,{key:1},[_hoisted_7],64))]),_hoisted_8])}var SignIntoCorrectAccount=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),App_vue_vue_type_style_index_0_lang="";window.openDevTools=t=>{document.querySelectorAll("webview")[t].openDevTools()};const _sfc_main={components:{AppBar,WebView,Dashboard,UpdateHub,SignIntoCorrectAccount},data(){return{updateRequired:!1,is_correct_account:!0,is_dashboard:!1,is_loading:!1,tabs:[],current_tab:null,keybinds:[],onCooldown:!1,player:null,bookmarks:[]}},methods:{visitPage(t,e=!1){if(e)return this.createNewTab(!0,t);const o=this.tabs.find(i=>i.id===this.current_tab);this.updateBookMarkStatusOfTab(),o.webview.loadURL(t)},newSession(){this.closeAllWindows(),this.is_correct_account=!0,setTimeout(()=>{this.createNewTab(!0,"https://web.simple-mmo.com/login")},100)},closeAllWindows(){this.tabs=[],this.current_tab=null,this.is_dashboard=!0},isUpdateRequied(){semver.exports.compare(window.background.version(),"0.0.53-22.5.17")==-1&&(this.updateRequired=!0)},isCorrectAccount(t){if(window.background.getPrivateToken()!=t)return console.log("User is not authenticated"),this.is_correct_account=!1;console.log("User is authenticated")},getPlayer(){var t=window.background.getPlayer();localStorage.player=t,this.player=JSON.parse(t)||null},saveKeybind(t,e,o){const i=this.keybinds.find(s=>s.id===t);i.key=e,i.keyName=o,localStorage.keybinds=JSON.stringify([...this.keybinds])},openDashboard(){if(this.tabs.length!=0&&this.current_tab!=null){const t=this.tabs.find(e=>e.id===this.current_tab);t.webview.style="display: none;",this.current_tab=null}this.is_dashboard=!0},keyBindListener(t){var e="";t.type=="mousedown"?t.button!=0&&t.button!=1&&t.button!=2&&(t.shiftKey&&(e+="Shift+"),t.ctrlKey&&(e+="Ctrl+"),t.altKey&&(e+="Alt+"),e+=`Mouse${t.button}`):(t.type=="keypress"||t.type=="keydown")&&(t.shiftKey&&(e+="Shift+"),t.ctrlKey&&(e+="Ctrl+"),t.altKey&&(e+="Alt+"),e+=t.code),document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="TEXTAREA"&&e!=""&&this.keybindController(e)},keybindController(pressed_key){var t,e;if(console.log(pressed_key),this.onCooldown)return console.warn("Keybinds are on cooldown");const keybind=this.keybinds.find(o=>o.key==pressed_key);return keybind==null?console.warn("Keybind does not exist for this key"):(keybind==null?void 0:keybind.enabled)?(this.onCooldown=!0,setTimeout(()=>{this.onCooldown=!1},150),keybind.patreon&&keybind.group!=2&&(this.player.patreon==null||parseInt((e=(t=this.player)==null?void 0:t.patreon)==null?void 0:e.tier)<keybind.tier)?console.warn("Cannot use the keybind without enough permission."):this.stepMode!=null?keybind.stepMode?keybind.group==2?eval(keybind.action):this.windowOnScreen.type!="stepMode"?console.warn("Cannot use the keybind outside step mode window."):eval(keybind.action):console.warn("Cannot use the keybind during step mode."):eval(keybind.action)):console.warn("Keybind is not available")},getKeybinds(){var t=[{id:1,name:"Reload",category:"Window Controls",keyName:"F5",key:"F5",stepMode:!1,action:"this.reload();",use_without_patreon:!0,patreon:!0,enabled:!0,tier:0,group:2},{id:2,name:"Go backwards",category:"Window Controls",keyName:"Alt+ArrowLeft",key:"Alt+ArrowLeft",stepMode:!0,action:"this.goBackward();",use_without_patreon:!0,patreon:!0,enabled:!0,tier:0,group:2},{id:3,name:"Go forward",category:"Window Controls",keyName:"Alt+ArrowRight",key:"Alt+ArrowRight",stepMode:!1,action:"this.goForward();",use_without_patreon:!0,patreon:!0,enabled:!0,tier:0,group:2},{id:4,name:"Close tab",category:"Window Controls",keyName:"Ctrl+W",key:"Ctrl+KeyW",stepMode:!0,action:"this.closeTab();",use_without_patreon:!0,patreon:!0,enabled:!0,tier:0,group:2},{id:6,name:"New tab",category:"Window Controls",keyName:"Ctrl+T",key:"Ctrl+KeyT",stepMode:!1,action:"this.newTab();",use_without_patreon:!0,patreon:!0,enabled:!0,tier:0,group:2}];return localStorage.keybinds!=null&&localStorage.keybinds!=""?this.updateKeybinds([...t],JSON.parse(localStorage.keybinds)):(this.keybinds=[...t],localStorage.keybinds=JSON.stringify([...this.keybinds]))},updateKeybinds(t,e){let o=t.map(s=>Object.assign({},s));Object.keys(t).forEach(function(s){Object.keys(e).forEach(function(r){t[s].id==e[r].id&&(o[s].key=e[r].key,(e[r].keyName!=null||e[r].keyName!=null)&&(o[s].keyName=e[r].keyName))})});var i=o.map(s=>Object.assign({},s));return this.keybinds=[...i],localStorage.keybinds=JSON.stringify([...this.keybinds])},pageController(t,e){if(e.includes("youtube.com")||e.includes("youtube.com")||e.includes("couchcatpod.com")||e.includes("trello.com")||e.includes("discord.gg")||e.includes("instagram")||e.includes("reddit")||e.includes("facebook")||e.includes("twitter"))return this.stop(),window.background.openInBrowser(e);if(e.includes("logout"),e.includes("i-am-not-a-bot")){this.stop();return}const o=this.tabs.find(i=>i.id===t);this.isPageBookmarked(e)?o.is_bookmarked=!0:o.is_bookmarked=!1,o.url=e},goBackward(t=this.current_tab){if(this.tabs.length==0)return;this.tabs.find(o=>o.id===t).webview.goBack()},goForward(t=this.current_tab){if(this.tabs.length==0)return;this.tabs.find(o=>o.id===t).webview.goForward()},reload(t=this.current_tab){if(this.tabs.length==0)return;this.tabs.find(o=>o.id===t).webview.reload()},stop(t=this.current_tab){if(this.tabs.length==0)return;this.tabs.find(o=>o.id===t).webview.stop()},isPageBookmarked(t){return this.bookmarks.find(o=>o.url===t)!=null},loadBookmarks(){localStorage.getItem("bookmarks")!=null&&(this.bookmarks=JSON.parse(localStorage.getItem("bookmarks")))},saveBookmarks(){localStorage.setItem("bookmarks",JSON.stringify(this.bookmarks))},updateBookMarkStatusOfTab(t=this.current_tab){const e=this.tabs.find(o=>o.id===t);this.isPageBookmarked(e.url)?e.is_bookmarked=!0:e.is_bookmarked=!1},bookmark(t=this.current_tab){if(this.tabs.length==0)return;const e=this.tabs.find(i=>i.id===t),o={title:e.title,url:e.url};this.isPageBookmarked(e.url)||(e.is_bookmarked=!0,this.bookmarks.push(o),this.saveBookmarks())},removeBookmark(t,e){this.bookmarks=this.bookmarks.filter(o=>o.url!=e||o.title!=t),this.updateBookMarkStatusOfTab(),this.saveBookmarks()},selectTab(t){this.current_tab=t,this.updateBookMarkStatusOfTab(t),this.is_dashboard=!1;for(let o=0;o<this.tabs.length;o++){const i=this.tabs[o];i.webview.style="display: none;"}const e=this.tabs.find(o=>o.id===t);e.webview.style="z-index: 100;"},closeTab(t=this.current_tab){if(this.tabs.length==0)return this.current_tab=null;if(!(this.current_tab==null&&t==null))if(this.is_dashboard)console.log(this.current_tab),this.tabs.find(o=>o.id===t).webview.remove(),this.tabs=[...this.tabs].filter(function(o){return o.id!==t});else{if(this.current_tab!=t)this.tabs.find(o=>o.id===t).webview.remove(),this.tabs=[...this.tabs].filter(function(o){return o.id!==t}),this.selectTab(this.current_tab);else{if(this.tabs.length>1){const o=this.tabs.map(i=>i.id).indexOf(t);o==0?this.selectTab(this.tabs[o+1].id):this.selectTab(this.tabs[o-1].id)}this.tabs.find(o=>o.id===t).webview.remove(),this.tabs=[...this.tabs].filter(function(o){return o.id!==t})}this.tabs.length==0&&(this.current_tab=null,this.is_dashboard=!0)}},newTab(){this.tabs.length!=5&&(this.is_dashboard=!1,this.createNewTab())},updateDiscordActivity(t="",e="",o=null){window.background.updateDiscordActivity(t,e,o)},async createNewTab(t=!0,e="https://web.simple-mmo.com/"){if(this.tabs.length!=5){var o=this,i=Math.floor(Math.random()*1001);await this.createWebview(i,e).then(async function(){const s=document.getElementById(i);var r=!1;o.isPageBookmarked(e)&&(r=!0),o.tabs.push({id:i,webview:s,title:"SimpleMMO",is_bookmarked:r,url:e,cant_go_back:!0,cant_go_forward:!0,is_loading:!0}),o.setUpListeners(s,i).then(async function(c){console.log("Finished preparing new tab."),t&&o.selectTab(i)})})}},async createWebview(t=0,e){var o=`<webview id="${t}" allowpopups partition="${window.auth.getSession()}" preload="${window.background.getPreload("web")}preload.js"  useragent="Mozilla/5.0 (Linux; Android 9.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Mobile Safari/537.36 | Simulated web version by Y0mu" src="${e}"></webview>`;document.getElementById("webview_container").insertAdjacentHTML("afterbegin",o)},async setUpListeners(t,e){const o=this.tabs.find(s=>s.id===e);var i=this;setTimeout(()=>{t.addEventListener("ipc-message",s=>{var r,c,d;if(s.channel=="updateDiscordActivity")return i.updateDiscordActivity((r=s.args[0].data)==null?void 0:r.detail,(c=s.args[0].data)==null?void 0:c.state,(d=s.args[0].data)==null?void 0:d.button);if(s.channel=="keybind")return i.keybindController(s.args[0]);if(s.channel=="authentication")return i.isCorrectAccount(s.args[0])}),t.addEventListener("did-start-loading",function(s){o.title=t.getTitle(),o.url=t.getURL(),o.is_loading=!0,o.cant_go_back=t.canGoBack()!==!0,o.cant_go_forward=t.canGoForward()!==!0},!1),t.addEventListener("will-navigate",function(s){console.log(s),i.url=s.url,i.pageController(e,s.url)},!1),t.addEventListener("did-stop-loading",function(s){o.title=t.getTitle(),o.url=t.getURL(),o.is_loading=!1,o.cant_go_back=t.canGoBack()!==!0,o.cant_go_forward=t.canGoForward()!==!0},!1)},10)}},created(){document.addEventListener("auxclick",function(t){t.preventDefault()},!1)},mounted(){if(this.isUpdateRequied(),!this.updateRequired){var t=this;window.addEventListener("keypress",function(e){e.ctrlKey&&e.key=="w"&&e.preventDefault(),t.keyBindListener(e)},!1),window.addEventListener("mousedown",this.keyBindListener,!1),window.addEventListener("keydown",function(e){e.ctrlKey&&e.key=="w"&&(e.preventDefault(),t.keyBindListener(e)),(e.key.startsWith("F")&&e.key!="F"||e.key=="Escape"||e.key=="Backspace"||e.key.startsWith("Arrow"))&&t.keyBindListener(e)},!1),this.getPlayer(),this.getKeybinds(),this.updateDiscordActivity("Web app","",""),this.loadBookmarks(),window.ipcRenderer.receive("openLinkInNewTab",function(e){console.log(e),t.createNewTab(!0,e)})}}},_hoisted_1={class:"w-sreen h-screen overflow-hidden"};function _sfc_render(t,e,o,i,s,r){const c=resolveComponent("AppBar"),d=resolveComponent("WebView"),a=resolveComponent("UpdateHub"),u=resolveComponent("SignIntoCorrectAccount"),_=resolveComponent("Dashboard");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(c,{onOpenDashboard:r.openDashboard,onSelectTab:e[0]||(e[0]=l=>r.selectTab(l)),onCloseTab:e[1]||(e[1]=l=>r.closeTab(l)),onVisitPage:e[2]||(e[2]=l=>r.visitPage(l[0],l[1])),onNewTab:e[3]||(e[3]=l=>r.newTab()),onReload:e[4]||(e[4]=l=>r.reload(l)),onStop:e[5]||(e[5]=l=>r.stop(l)),onRemoveBookmark:e[6]||(e[6]=l=>r.removeBookmark(l[0],l[1])),onBookmark:e[7]||(e[7]=l=>r.bookmark(l)),onGoForward:e[8]||(e[8]=l=>r.goForward(l)),onGoBackward:e[9]||(e[9]=l=>r.goBackward(l)),bookmarks:s.bookmarks,is_dashboard:s.is_dashboard,current_tab:s.current_tab,tabs:s.tabs,updateRequired:s.updateRequired,is_correct_account:s.is_correct_account},null,8,["onOpenDashboard","bookmarks","is_dashboard","current_tab","tabs","updateRequired","is_correct_account"]),s.is_correct_account?(openBlock(),createBlock(d,{key:0,current_tab:s.current_tab,tabs:s.tabs},null,8,["current_tab","tabs"])):createCommentVNode("",!0),s.updateRequired?(openBlock(),createBlock(a,{key:1})):s.is_correct_account?(openBlock(),createElementBlock(Fragment,{key:3},[s.is_dashboard||s.tabs.length==0?(openBlock(),createBlock(_,{key:0,keybinds:s.keybinds,player:s.player},null,8,["keybinds","player"])):createCommentVNode("",!0)],64)):(openBlock(),createBlock(u,{key:2,onNew_session:e[10]||(e[10]=l=>r.newSession())}))])}var App=_export_sfc(_sfc_main,[["render",_sfc_render]]),windi="";const app=createApp(App);app.use(plugin).mount("#app");
